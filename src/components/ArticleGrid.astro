---
import ArticleCard from './ArticleCard.astro';

interface ArticleRecord {
  title: string;
  slug: string;
  summary?: string | null;
  updatedAt: string;
  readingTime?: number | null;
  tags?: Array<{ name: string }>;
  coverImage?: { url?: string | null; alternativeText?: string | null } | null;
}

interface Props {
  articles: ArticleRecord[];
  locale: string;
  readMoreLabel: string;
  summaryFallback: string;
}

const {
  articles = [],
  locale,
  readMoreLabel,
  summaryFallback,
} = Astro.props as Props;

const featuredArticle = articles[0];
const secondaryArticles = articles.slice(1, 3);
const additionalArticles = articles.slice(3, 6);
---

<div class="articles-grid">
  {featuredArticle && (
    <ArticleCard
      article={featuredArticle}
      locale={locale}
      variant="featured"
      readMoreLabel={readMoreLabel}
      summaryFallback={summaryFallback}
    />
  )}

  <div class="articles-right-column">
    {secondaryArticles.map((article) => (
      <ArticleCard
        article={article}
        locale={locale}
        variant="small"
        readMoreLabel={readMoreLabel}
        summaryFallback={summaryFallback}
      />
    ))}
  </div>
</div>

{additionalArticles.length > 0 && (
  <div class="articles-row-three">
    {additionalArticles.map((article) => (
      <ArticleCard
        article={article}
        locale={locale}
        variant="medium"
        readMoreLabel={readMoreLabel}
        summaryFallback={summaryFallback}
      />
    ))}
  </div>
)}

<style>
  .articles-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
  }

  .articles-right-column {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .articles-row-three {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    margin-top: 3rem;
  }

  @media (max-width: 1024px) {
    .articles-grid {
      grid-template-columns: 1fr;
    }

    .articles-right-column {
      flex-direction: row;
      gap: 1.5rem;
    }

    .articles-right-column > :global(article) {
      flex: 1;
    }

    .articles-row-three {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 768px) {
    .articles-right-column {
      flex-direction: column;
    }

    .articles-row-three {
      grid-template-columns: 1fr;
    }
  }
</style>
