---
import { getWebsiteData } from '../services/cms';
import { getDefaultLanguage } from '../utils/language';

const websiteData = await getWebsiteData();

if (websiteData) {
  const defaultLang = getDefaultLanguage(websiteData.locales, websiteData.defaultLocale);
  return Astro.redirect(`/${defaultLang}`);
}

// If no website data, redirect to English as fallback
return Astro.redirect('/en');
---
