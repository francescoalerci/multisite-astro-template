---
import { getWebsiteData } from '../services/cms';
import { getDefaultLanguage } from '../utils/language';

const websiteData = await getWebsiteData();

if (websiteData) {
  const locales = websiteData.supportedLocales?.length
    ? websiteData.supportedLocales
    : websiteData.defaultLocale
      ? [websiteData.defaultLocale]
      : [];
  const defaultLang = getDefaultLanguage(locales, websiteData.defaultLocale);
  return Astro.redirect(`/${defaultLang}`);
}

return Astro.redirect('/en');
---
